#
# build.cfg -- configuration information for building Subversion
#
# This file is processed by ###, creating ###
#

# ----------------------------------------------------------------------------
#
# PREDEFINED SECTIONS
#
# These are global in scope, providing information to the process, rather
# than defining build targets.
#

[external]
paths =
	apr
	expat-lite
	neon

[includes]
paths = subversion/include/*.h

[static-apache]
# Makefile.in and config.m4 (omit README)
paths = subversion/mod_dav_svn/static/[Mc]*

# ----------------------------------------------------------------------------
#
# BUILD TARGETS
#

[client]
type = exe
path = subversion/client
group = programs
libs = libsvn_client libsvn_wc libsvn_ra $(SVN_CLIENT_DEPS) libsvn_delta
	libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[svnadmin]
type = exe
path = subversion/svnadmin
group = fs-programs
libs = libsvn_fs libsvn_delta libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)
install = sbin

[libsvn_client]
type = lib
path = subversion/libsvn_client
group = libs

[libsvn_delta]
type = lib
path = subversion/libsvn_delta
group = libs

[libsvn_fs]
type = lib
path = subversion/libsvn_fs
group = fs-libs
libs = $(SVN_DB_LIBS)

[libsvn_ra]
type = lib
path = subversion/libsvn_ra
group = libs

[libsvn_ra_dav]
type = lib
path = subversion/libsvn_ra_dav
group = libs
libs = -L$(top_builddir)/neon/src/.libs -lneon

[libsvn_ra_local]
type = lib
path = subversion/libsvn_ra_local
group = fs-libs
libs = libsvn_repos libsvn_fs libsvn_delta libsvn_subr

[libsvn_repos]
type = lib
path = subversion/libsvn_repos
group = fs-libs

[libsvn_subr]
type = lib
path = subversion/libsvn_subr
group = libs

[libsvn_wc]
type = lib
path = subversion/libsvn_wc
group = libs

[libmod_dav_svn]
type = lib
path = subversion/mod_dav_svn
group = apache-mods
libs = libsvn_repos libsvn_fs libsvn_delta libsvn_subr
# we don't need the .so version stuff for an Apache module, so avoid them
link-flags = -avoid-version
# need special build rules to include the Apache headers
custom = apache-mod
install = apache-mod

[libsvn_test]
type = lib
path = subversion/tests
### need to find a way to do fs-helpers conditionally...
sources = svn_tests_main.c svn_test_editor.c fs-helpers.c
install = test
group = libs

[deltaparse-test]
type = exe
path = subversion/tests/libsvn_delta
sources = deltaparse-test.c
install = test
group = programs
libs = libsvn_test $(SVN_TEST_FS_LIBS) libsvn_delta libsvn_subr
	$(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[svndiff-test]
type = exe
path = subversion/tests/libsvn_delta
sources = svndiff-test.c
install = test
group = programs
libs = libsvn_delta libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[vdelta-test]
type = exe
path = subversion/tests/libsvn_delta
sources = vdelta-test.c
install = test
group = programs
libs = libsvn_delta libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[random-test]
type = exe
path = subversion/tests/libsvn_delta
sources = random-test.c
install = test
group = programs
libs = libsvn_delta libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[xml-output-test]
type = exe
path = subversion/tests/libsvn_delta
sources = xml-output-test.c
install = test
group = programs
libs = libsvn_delta libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[fs-test]
type = exe
path = subversion/tests/libsvn_fs
sources = fs-test.c
install = test
group = fs-programs
libs = libsvn_test libsvn_fs libsvn_delta libsvn_subr
	$(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[skel-test]
type = exe
path = subversion/tests/libsvn_fs
sources = skel-test.c
install = test
group = fs-programs
libs = libsvn_test libsvn_fs libsvn_delta libsvn_subr
	$(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[ra-local-test]
type = exe
path = subversion/tests/libsvn_ra_local
sources = ra-local-test.c
install = test
group = fs-programs
libs = libsvn_test libsvn_ra $(SVN_CLIENT_DEPS) libsvn_fs libsvn_delta
	libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[repos-test]
type = exe
path = subversion/tests/libsvn_repos
sources = repos-test.c dir-delta-editor.c
install = test
group = fs-programs
libs = libsvn_test libsvn_repos libsvn_fs libsvn_delta libsvn_subr
	$(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[hashdump-test]
type = exe
path = subversion/tests/libsvn_subr
sources = hashdump-test.c
install = test
group = programs
libs = libsvn_test $(SVN_TEST_FS_LIBS) libsvn_delta libsvn_subr
	$(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[stringtest]
type = exe
path = subversion/tests/libsvn_subr
sources = stringtest.c
install = test
group = programs
libs = libsvn_test $(SVN_TEST_FS_LIBS) libsvn_delta libsvn_subr
	$(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[target-test]
type = exe
path = subversion/tests/libsvn_subr
sources = target-test.c
install = test
group = programs
libs = libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[checkout-test]
type = exe
path = subversion/tests/libsvn_wc
sources = checkout-test.c
install = test
group = programs
libs = libsvn_wc libsvn_delta libsvn_subr $(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

[commit-test]
type = exe
path = subversion/tests/libsvn_wc
sources = commit-test.c
install = test
group = programs
libs = libsvn_test $(SVN_TEST_FS_LIBS) libsvn_wc libsvn_delta libsvn_subr
	$(SVN_APR_LIBS) $(SVN_EXPAT_LIBS)

# ----------------------------------------------------------------------------
